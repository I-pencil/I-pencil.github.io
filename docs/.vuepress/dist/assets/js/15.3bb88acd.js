(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{260:function(e,n,s){"use strict";s.r(n);var i=s(0),r=Object(i.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"使用jenkins时，报“cannot-run-program-nohup-”错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用jenkins时，报“cannot-run-program-nohup-”错误","aria-hidden":"true"}},[e._v("#")]),e._v(' 使用Jenkins时，报“Cannot run program "nohup"”错误')]),e._v(" "),s("p",[e._v("最近在学习"),s("code",[e._v("Jenkins")]),e._v("。在学习"),s("a",{attrs:{href:"https://note.youdao.com/",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("Build a Node.js and React app with npm")]),e._v(" "),s("OutboundLink")],1),e._v("部分时，按照官网给的"),s("code",[e._v("simple-node-js-react-npm-app")]),e._v("例子，需要跑一个"),s("code",[e._v("pipeline")]),e._v("，配置文件"),s("code",[e._v("Jenkifile")]),e._v("如下")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("pipeline {\n  agent any\n  environment {\n    CI = 'true'\n  }\n  stages {\n    stage('Build') {\n      steps {\n        sh 'npm install'\n      }\n    }\n    stage('Test') {\n      steps {\n        sh './jenkins/scripts/test.sh'\n      }\n    }\n    stage('Deliver') {\n      steps {\n        sh './jenkins/scripts/deliver.sh'\n        input message: 'Finished using the web site? (Click \"Proceed\" to continue)'\n        sh './jenkins/scripts/kill.sh'\n      }\n    }\n  }\n}\n")])])]),s("p",[e._v("但在运行时总报下面的错误：")]),e._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('java.io.IOException: Cannot run program "nohup" (in directory "C:\\Users\\king\\.jenkins\\workspace\\node-pipeline-demo"): CreateProcess error=2, 系统找不到指定的文件。\n')])])]),s("p",[e._v("有答案说"),s("code",[e._v("sh")]),e._v("是"),s("code",[e._v("Linux")]),e._v("用的，"),s("code",[e._v("window")]),e._v("应该用"),s("code",[e._v("bat")]),e._v("，我将"),s("code",[e._v("sh")]),e._v("改成"),s("code",[e._v("bat")]),e._v("还是没有解决。")]),e._v(" "),s("p",[e._v("最后在"),s("a",{attrs:{href:"https://stackoverflow.com",target:"_blank",rel:"noopener noreferrer"}},[e._v("stackoverflow"),s("OutboundLink")],1),e._v("上面找到了原因和一个比较满意的答案，")]),e._v(" "),s("p",[e._v("原因是在"),s("code",[e._v("Windows")]),e._v("下，使用了如下路径：")]),e._v(" "),s("ul",[s("li",[s("code",[e._v('mklink "C:\\Program Files\\Git\\cmd\\nohup.exe" "C:\\Program Files\\git\\usr\\bin\\nohup.exe"')])]),e._v(" "),s("li",[s("code",[e._v('mklink "C:\\Program Files\\Git\\cmd\\msys-2.0.dll" "C:\\Program Files\\git\\usr\\bin\\msys-2.0.dll"')])]),e._v(" "),s("li",[s("code",[e._v('mklink "C:\\Program Files\\Git\\cmd\\msys-iconv-2.dll" "C:\\Program Files\\git\\usr\\bin\\msys-iconv-2.dll"')])]),e._v(" "),s("li",[s("code",[e._v('mklink "C:\\Program Files\\Git\\cmd\\msys-intl-8.dll" "C:\\Program Files\\git\\usr\\bin\\msys-intl-8.dll"')])])]),e._v(" "),s("p",[e._v("解决步骤如下")]),e._v(" "),s("ul",[s("li",[e._v("下载"),s("a",{attrs:{href:"https://git-scm.com/downloads",target:"_blank",rel:"noopener noreferrer"}},[s("code",[e._v("git-bash")]),s("OutboundLink")],1),e._v("，例如安装目录是"),s("code",[e._v("C:\\Program Files\\Git")])]),e._v(" "),s("li",[e._v("将"),s("code",[e._v("C:\\Program Files\\Git\\bin")]),e._v("注册到环境变量下， 注意注册环境变量后，可能需要重启才能生效，我重启后就没报错了。")]),e._v(" "),s("li",[e._v("在使用"),s("code",[e._v("git-bash")]),e._v("时，使"),s("code",[e._v("nohup")]),e._v("对"),s("code",[e._v("Jenkins")]),e._v("可用。以管理员身份运"),s("code",[e._v("行windows cmd")]),e._v("，然后输入下列命令：")])]),e._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('mklink "C:\\Program Files\\Git\\bin\\nohup.exe" "C:\\Program Files\\git\\usr\\bin\\nohup.exe"\n\nmklink "C:\\Program Files\\Git\\bin\\msys-2.0.dll" "C:\\Program Files\\git\\usr\\bin\\msys-2.0.dll"\n\nmklink "C:\\Program Files\\Git\\bin\\msys-iconv-2.dll" "C:\\Program Files\\git\\usr\\bin\\msys-iconv-2.dll"\n\nmklink "C:\\Program Files\\Git\\bin\\msys-intl-8.dll" "C:\\Program Files\\git\\usr\\bin\\msys-intl-8.dll"\n')])])])])}),[],!1,null,null,null);n.default=r.exports}}]);