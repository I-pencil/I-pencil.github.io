(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{623:function(e,s,a){"use strict";a.r(s);var t=a(11),v=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("p",[e._v("最近用"),a("code",[e._v("webpack")]),e._v("热加载项目时经常挂掉，并报:")]),e._v(" "),a("div",{staticClass:"language-sh extra-class"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[e._v("webpack:CALL_AND_RETRY_LAST Allocation failed - JavaScript heap out of memory\n")])])]),a("p",[e._v("错误原因是：编译的时间内存泄漏,因为前端项目如果非常的庞大，"),a("code",[e._v("webpack")]),e._v("编译时就会占用很多的系统资源，如果超出了"),a("code",[e._v("V8")]),e._v("对"),a("code",[e._v("Node")]),e._v("默认的内存限制大小就会出现这个错误了。")]),e._v(" "),a("p",[e._v("解决办法是我们在"),a("code",[e._v("Node")]),e._v("在启动时可以传递"),a("code",[e._v("--max-old-space-size")]),e._v("或"),a("code",[e._v("--max-new-space-size")]),e._v("来调整内存大小的使用限制；")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("node --max-old-space-size=2048\nnode --max-new-space-size=2048\n")])])]),a("p",[e._v("在开发中，如果使用"),a("code",[e._v("webpack-dev-server")]),e._v("插件，打开 "),a("code",[e._v("package.json")]),e._v("可以看到")]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"webpack-dev-server --inline --progress --config build/webpack.dev.conf.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"start"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"npm run dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"build"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"node build/build.js"')]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n")])])]),a("p",[e._v("上面的命令中没有使用"),a("code",[e._v("node")]),e._v("命令，上面的解决方法无法使用。")]),e._v(" "),a("p",[e._v("解决方法：")]),e._v(" "),a("p",[a("code",[e._v("webpack-dev-server")]),e._v("封装了"),a("code",[e._v("node run dev")]),e._v("命令，可以在"),a("code",[e._v("webpack-dev-server")]),e._v("命令中修改：")]),e._v(" "),a("ul",[a("li",[e._v("打开"),a("code",[e._v("node_modules")]),e._v("文件夹")]),e._v(" "),a("li",[e._v("打开"),a("code",[e._v(".bin")]),e._v("文件夹")]),e._v(" "),a("li",[e._v("找到"),a("code",[e._v("webpack-dev-server.cmd")]),e._v("；这个文件并用编辑器打开；打开后我的如下：")])]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('@IF EXIST "%~dp0\\node.exe" (\n  "%~dp0\\node.exe"  "%~dp0\\..\\webpack-dev-server\\bin\\webpack-dev-server.js" %*\n) ELSE (\n  @SETLOCAL\n  @SET PATHEXT=%PATHEXT:;.JS;=;%\n  node  "%~dp0\\..\\webpack-dev-server\\bin\\webpack-dev-server.js" %*\n)\n')])])]),a("p",[e._v("这里就有"),a("code",[e._v("dev")]),e._v("环境的"),a("code",[e._v("node")]),e._v("运行命令了,我们只要在倒数第二行"),a("code",[e._v("node")]),e._v("后面加上上文提到的代码就可以了；注意空格；")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('@IF EXIST "%~dp0\\node.exe" (\n  "%~dp0\\node.exe"  "%~dp0\\..\\webpack-dev-server\\bin\\webpack-dev-server.js" %*\n) ELSE (\n  @SETLOCAL\n  @SET PATHEXT=%PATHEXT:;.JS;=;%\n  node  --max-old-space-size=4096  "%~dp0\\..\\webpack-dev-server\\bin\\webpack-dev-server.js" %*\n)\n')])])])])}),[],!1,null,null,null);s.default=v.exports}}]);